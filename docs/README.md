BPhalcon Document
=================


1. BModel and The Save Attributes Concept
---

BModel implements many functions which involves with the "save attributes".
Save Attributes are the attributes that can be saved by BModel's mass assignment functions. 

* Define save attributes in Model Class
```php
public function getSaveAttributesName()
{
    return ['name', 'price', 'active', 'product_types_id'];
}
```

* After define the save attributes, you can use mass assignment functions in Controller to assign values to all save attributes of a BModel instance
```php
$product = new Products();
// Mass assignment via load() function
$product->load($_POST);

/* The code above is equal to the following
$product->product_types_id = $request->getPost('product_types_id');
$product->name = $request->getPost('name');
$product->price = $request->getPost('price');
$product->active = $request->getPost('active'); */

// Or you can do mass assignment by using magic method
$product->save_attributes = $_POST;

//Get save attributes and their values
$save_attributes = $product->save_attributes;
```

2. Set default in BController
---

BController provides a function to set default values to a BModel's instance.
```php
$product = Products::findFirst($id);
$this->setDefault($product);

/*
// The code above is equal to the following.
$this->tag->setDefault('product_types_id', $products->product_types_id);
$this->tag->setDefault('name', $products->name);
$this->tag->setDefault('price', $products->price);
$this->tag->setDefault('active', $products->active); 
// Notice that non-save attributes (for example: id, created_at, updated_at)
// will not be set default via setDefault() function.
*/
```

3. Display form using BForm
---

BForm is used to display form in an extremely short way. Futhermore, all the tag generated by BForm are applied Bootstrap style.
**Create a BForm**
```php
// Create new instance
$product = new Product();

// Create a form for the above instace
$this->view->form = new BForm($product);
```
**Display form in views**
```php
// Start form, data will be summit to createAction in ItemController
$form->start('item/create');

// Create text field for 'name' attribute
$form->textField('name');

// Create numeric field for 'price' attribute
$form->numericField('price');

// Create text field for 'active' attribute
$form->numericField('active');

// Create numeric field for 'product_types_id' attribute
$form->numericField('product_types_id');

// End form
$form->end();
```
Each tag function of BForm will generate the following contents
+ A Label for the attribute
+ An input field for the attribute
+ An error container, which will display the errors occured when save the instance

**The label of the attribute**, by default, will be the attribute name in words. For example, the `product_types_id` attribute label is 'Product Types Id'. But you can easily define labels for attributes by using `getAttributeLabels` in Model Class
```php
public static function getAttributeLabels()
{
    return [
        'product_types_id' => 'Product Type',
    ];
}
```
By defining in Model, the label that displayed in view will be 'Product Type' instead of 'Product Type Id'.

**There are many input field functions in BForm.** And they have the same name as the functions in the Phalcon\Tag. For example, Phalcon\Tag has the following functions: 'textField', 'numericField', 'emailField', 'passwordField', 'hiddenField', 'textArea', ... And BForm has all of them.

**BForm is carefully built using the original functions in Phalcon\Tag**. So the input fields generated by BForm work perfectly with `setDefault()` function in Controller.
